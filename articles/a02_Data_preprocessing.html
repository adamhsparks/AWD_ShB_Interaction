<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Preprocessing and Area Calculations • rice.awd.pests</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data Preprocessing and Area Calculations">
<meta property="og:description" content="rice.awd.shb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rice.awd.pests</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a01_AWD_Sheath_Blight_Study_Notes.html">AWD Sheath Blight Study Notes</a>
    </li>
    <li>
      <a href="../articles/a02_Data_preprocessing.html">Data Preprocessing and Area Calculations</a>
    </li>
    <li>
      <a href="../articles/a03_raw_data_visualisation.html">Visualise Data</a>
    </li>
    <li>
      <a href="../articles/a04_check_residuals.html">Check Data Residuals</a>
    </li>
    <li>
      <a href="../articles/a05_data_analysis.html">Sheath Blight Analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/adamhsparks/rice_AWD_ShB_analysis/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Data Preprocessing and Area Calculations</h1>
                        <h4 class="author">A. H. Sparks</h4>
            
            <h4 class="date">2020-06-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/adamhsparks/rice_AWD_ShB_analysis/blob/master/vignettes/a02_Data_preprocessing.Rmd"><code>vignettes/a02_Data_preprocessing.Rmd</code></a></small>
      <div class="hidden name"><code>a02_Data_preprocessing.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<div id="data-availability" class="section level2">
<h2 class="hasAnchor">
<a href="#data-availability" class="anchor"></a>Data Availability</h2>
<p>The data are openly available for download from Zenodo, <a href="https://doi.org/10.5281/zenodo.3889800"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.3889800.svg" alt="DOI"></a>, with full documentation (Sparks et al. 2020). These same data are also distributed with this R package for completeness, available in the <code>inst/extdata</code> folder or just <code>extdata</code> when installed locally.</p>
</div>
<div id="notes" class="section level2">
<h2 class="hasAnchor">
<a href="#notes" class="anchor"></a>Notes</h2>
<p><em>Note</em> TRT is created here as a combination of the main plot/split plot treatment. This is used in place of plot numbers to keep the data in order. However, it is not used in the final analysis as a treatment effect.</p>
</div>
</div>
<div id="load-libraries" class="section level1">
<h1 class="hasAnchor">
<a href="#load-libraries" class="anchor"></a>Load Libraries</h1>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"tidyverse"</span>)
<span class="co">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</span>
<span class="co">#&gt; ✔ ggplot2 3.3.1     ✔ purrr   0.3.4</span>
<span class="co">#&gt; ✔ tibble  3.0.1     ✔ dplyr   1.0.0</span>
<span class="co">#&gt; ✔ tidyr   1.1.0     ✔ stringr 1.4.0</span>
<span class="co">#&gt; ✔ readr   1.3.1     ✔ forcats 0.5.0</span>
<span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span>
<span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"agricolae"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"usethis"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"lubridate"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'lubridate'</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     date, intersect, setdiff, union</span></pre></body></html></div>
</div>
<div id="load-data" class="section level1">
<h1 class="hasAnchor">
<a href="#load-data" class="anchor"></a>Load Data</h1>
<div id="experiment" class="section level2">
<h2 class="hasAnchor">
<a href="#experiment" class="anchor"></a>2015 Experiment</h2>
<p>Preprocess 2015 data for all assessment dates.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># Preprocess 2015 data for all assessment dates</span>

<span class="no">DS2015_Raw_22DAI</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span>(
    <span class="kw">url</span> <span class="kw">=</span> <span class="st">"https://zenodo.org/record/3889800/files/DS2015_Raw_22DAI.csv?download=1"</span>,
    <span class="kw">mode</span> <span class="kw">=</span> <span class="st">"wb"</span>,
    <span class="kw">destfile</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"DS2015_Raw_22DAI.csv"</span>)
  )

<span class="no">DS2015_Raw_35DAI</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span>(
    <span class="kw">url</span> <span class="kw">=</span> <span class="st">"https://zenodo.org/record/3889800/files/DS2015_Raw_35DAI.csv?download=1"</span>,
    <span class="kw">mode</span> <span class="kw">=</span> <span class="st">"wb"</span>,
    <span class="kw">destfile</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"DS2015_Raw_35DAI.csv"</span>)
  )

<span class="no">DS2015_Raw_49DAI</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span>(
    <span class="kw">url</span> <span class="kw">=</span> <span class="st">"https://zenodo.org/record/3889800/files/DS2015_Raw_49DAI.csv?download=1"</span>,
    <span class="kw">mode</span> <span class="kw">=</span> <span class="st">"wb"</span>,
    <span class="kw">destfile</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"DS2015_Raw_49DAI.csv"</span>)
  )

<span class="no">DS2015_Raw_62DAI</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span>(
    <span class="kw">url</span> <span class="kw">=</span> <span class="st">"https://zenodo.org/record/3889800/files/DS2015_Raw_62DAI.csv?download=1"</span>,
    <span class="kw">mode</span> <span class="kw">=</span> <span class="st">"wb"</span>,
    <span class="kw">destfile</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"DS2015_Raw_62DAI.csv"</span>)
  )

<span class="no">DS2015_Raw_83DAI</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span>(
    <span class="kw">url</span> <span class="kw">=</span> <span class="st">"https://zenodo.org/record/3889800/files/DS2015_Raw_83DAI.csv?download=1"</span>,
    <span class="kw">mode</span> <span class="kw">=</span> <span class="st">"wb"</span>,
    <span class="kw">destfile</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"DS2015_Raw_83DAI.csv"</span>)
  )

<span class="no">files</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="kw">pattern</span> <span class="kw">=</span> <span class="st">"^DS2015_Raw"</span>, <span class="kw">full.names</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="no">reformat</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">files</span>) {
  <span class="no">x</span> <span class="kw">&lt;-</span> <span class="fu">read_csv</span>(
    <span class="no">files</span>,
    <span class="fu">cols</span>(
      <span class="fu">col_character</span>(),
      <span class="fu">col_character</span>(),
      <span class="fu">col_character</span>(),
      <span class="fu">col_character</span>(),
      <span class="fu">col_character</span>(),
      <span class="fu">col_character</span>(),
      <span class="fu">col_double</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>(),
      <span class="fu">col_integer</span>()
    ),
    <span class="kw">col_names</span> <span class="kw">=</span> <span class="fl">TRUE</span>
  )
  <span class="no">x</span>[<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">x</span>)] <span class="kw">&lt;-</span> <span class="fl">0</span>

  <span class="no">x</span> <span class="kw">&lt;-</span> <span class="fu">arrange</span>(<span class="no">x</span>, <span class="no">REP</span>, <span class="no">TRT</span>)

  <span class="co"># add plot numbers</span>
  <span class="no">x</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="fl">24</span>, <span class="kw">each</span> <span class="kw">=</span> <span class="fl">18</span>)

  <span class="co"># Calculate tiller sheath blight incidence -----------------------------------</span>
  <span class="no">x</span> <span class="kw">&lt;-</span>
    <span class="no">x</span> <span class="kw">%&gt;%</span>
    <span class="fu">mutate</span>(<span class="kw">TShB_incidence</span> <span class="kw">=</span> <span class="no">NTShB</span> / <span class="no">NTIL</span>)

  <span class="no">TShB_incidence</span> <span class="kw">&lt;-</span>
    <span class="no">x</span> <span class="kw">%&gt;%</span> <span class="fu">select</span>(<span class="no">REP</span>,
                 <span class="no">TRT</span>,
                 <span class="no">WMGT</span>,
                 <span class="no">NRTE</span>,
                 <span class="no">SMPL</span>,
                 <span class="no">HILL</span>,
                 <span class="no">HGHT</span>,
                 <span class="no">NTIL</span>,
                 <span class="no">NTShB</span>,
                 <span class="no">TShB_incidence</span>)

  <span class="co"># Gather tillers--------------------------------------------------------------</span>
  <span class="no">TIL</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">vector</a></span>(<span class="kw">mode</span> <span class="kw">=</span> <span class="st">"list"</span>, <span class="kw">length</span> <span class="kw">=</span> <span class="fl">4</span>)

  <span class="kw">for</span> (<span class="no">i</span> <span class="kw">in</span> <span class="fl">1</span>:<span class="fl">4</span>) {
    <span class="no">y</span> <span class="kw">&lt;-</span>
      <span class="no">x</span> <span class="kw">%&gt;%</span>
      <span class="fu">select</span>(
        <span class="no">TRT</span>,
        <span class="no">REP</span>,
        <span class="no">WMGT</span>,
        <span class="no">SMPL</span>,
        <span class="no">NRTE</span>,
        <span class="no">HILL</span>,
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"TIL"</span>, <span class="no">i</span>),
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"GL"</span>, <span class="no">i</span>),
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"DL"</span>, <span class="no">i</span>),
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SHB"</span>, <span class="no">i</span>),
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLA"</span>, <span class="no">i</span>),
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLB"</span>, <span class="no">i</span>),
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLC"</span>, <span class="no">i</span>),
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLD"</span>, <span class="no">i</span>),
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLE"</span>, <span class="no">i</span>),
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLF"</span>, <span class="no">i</span>)
      ) <span class="kw">%&gt;%</span>
      <span class="fu">gather</span>(<span class="no">LEAF</span>,
             <span class="no">LEAF_ShB</span>,
             <span class="fu">starts_with</span>(<span class="st">"SL"</span>))

    <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">y</span>)[<span class="fl">7</span>] <span class="kw">&lt;-</span> <span class="st">"TIL"</span>
    <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">y</span>)[<span class="fl">8</span>] <span class="kw">&lt;-</span> <span class="st">"GL"</span>
    <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">y</span>)[<span class="fl">9</span>] <span class="kw">&lt;-</span> <span class="st">"DL"</span>
    <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">y</span>)[<span class="fl">10</span>] <span class="kw">&lt;-</span> <span class="st">"TIL_ShB"</span>

    <span class="no">y</span>$<span class="no">LEAF</span>[<span class="no">y</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLA"</span>, <span class="no">i</span>)] <span class="kw">&lt;-</span> <span class="fl">1</span>
    <span class="no">y</span>$<span class="no">LEAF</span>[<span class="no">y</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLB"</span>, <span class="no">i</span>)] <span class="kw">&lt;-</span> <span class="fl">2</span>
    <span class="no">y</span>$<span class="no">LEAF</span>[<span class="no">y</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLC"</span>, <span class="no">i</span>)] <span class="kw">&lt;-</span> <span class="fl">3</span>
    <span class="no">y</span>$<span class="no">LEAF</span>[<span class="no">y</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLD"</span>, <span class="no">i</span>)] <span class="kw">&lt;-</span> <span class="fl">4</span>
    <span class="no">y</span>$<span class="no">LEAF</span>[<span class="no">y</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLE"</span>, <span class="no">i</span>)] <span class="kw">&lt;-</span> <span class="fl">5</span>
    <span class="no">y</span>$<span class="no">LEAF</span>[<span class="no">y</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SLF"</span>, <span class="no">i</span>)] <span class="kw">&lt;-</span> <span class="fl">6</span>

    <span class="no">TIL</span><span class="kw">[[</span><span class="no">i</span>]] <span class="kw">&lt;-</span> <span class="no">y</span>
  }

  <span class="no">z</span> <span class="kw">&lt;-</span> <span class="fu">bind_rows</span>(<span class="no">TIL</span>)
  <span class="no">x</span> <span class="kw">&lt;-</span> <span class="fu">left_join</span>(<span class="no">TShB_incidence</span>, <span class="no">z</span>)
}

<span class="co"># Run reformat function for all 2015 files -------------------------------------</span>
<span class="no">DS2015</span> <span class="kw">&lt;-</span> <span class="fu">map_df</span>(<span class="no">files</span>, <span class="no">reformat</span>)
<span class="co">#&gt; Joining, by = c("REP", "TRT", "WMGT", "NRTE", "SMPL", "HILL")</span>
<span class="co">#&gt; Joining, by = c("REP", "TRT", "WMGT", "NRTE", "SMPL", "HILL")</span>
<span class="co">#&gt; Joining, by = c("REP", "TRT", "WMGT", "NRTE", "SMPL", "HILL")</span>
<span class="co">#&gt; Joining, by = c("REP", "TRT", "WMGT", "NRTE", "SMPL", "HILL")</span>
<span class="co">#&gt; Joining, by = c("REP", "TRT", "WMGT", "NRTE", "SMPL", "HILL")</span>

<span class="co"># Add dates --------------------------------------------------------------------</span>
<span class="no">DS2015_22DAI</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">DATE</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2015-02-12"</span>, <span class="kw">origin</span> <span class="kw">=</span> <span class="st">"1970-01-01"</span>),
                                      <span class="kw">times</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>),
                           <span class="co"># number of rows / 5 observations</span>
                           <span class="kw">ASMT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>, <span class="kw">times</span> <span class="kw">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>))

<span class="no">DS2015_35DAI</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">DATE</span> <span class="kw">=</span>
                             <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2015-02-20"</span>, <span class="kw">origin</span> <span class="kw">=</span> <span class="st">"1970-01-01"</span>),
                                 <span class="kw">times</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>),
                           <span class="co"># number of rows / 5 observations</span>
                           <span class="kw">ASMT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">2</span>, <span class="kw">times</span> <span class="kw">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>))

<span class="no">DS2015_49DAI</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">DATE</span> <span class="kw">=</span>
                             <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2015-03-05"</span>, <span class="kw">origin</span> <span class="kw">=</span> <span class="st">"1970-01-01"</span>),
                                 <span class="kw">times</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>),
                           <span class="co"># number of rows / 5 observations</span>
                           <span class="kw">ASMT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">3</span>, <span class="kw">times</span> <span class="kw">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>))

<span class="no">DS2015_62DAI</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">DATE</span> <span class="kw">=</span>
                             <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2015-03-19"</span>, <span class="kw">origin</span> <span class="kw">=</span> <span class="st">"1970-01-01"</span>),
                                 <span class="kw">times</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>),
                           <span class="co"># number of rows / 5 observations</span>
                           <span class="kw">ASMT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">4</span>, <span class="kw">times</span> <span class="kw">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>))

<span class="no">DS2015_83DAI</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">DATE</span> <span class="kw">=</span>
                             <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2015-04-01"</span>, <span class="kw">origin</span> <span class="kw">=</span> <span class="st">"1970-01-01"</span>),
                                 <span class="kw">times</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>),
                           <span class="co"># number of rows / 5 observations</span>
                           <span class="kw">ASMT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">5</span>, <span class="kw">times</span> <span class="kw">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2015</span>) / <span class="fl">5</span>))

<span class="no">DS2015_DATES</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">DS2015_22DAI</span>,
        <span class="no">DS2015_35DAI</span>,
        <span class="no">DS2015_49DAI</span>,
        <span class="no">DS2015_62DAI</span>,
        <span class="no">DS2015_83DAI</span>)

<span class="no">DS2015</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(<span class="no">DS2015</span>, <span class="no">DS2015_DATES</span>)

<span class="co"># Add days after inoculation column</span>
<span class="no">DS2015</span> <span class="kw">&lt;-</span>
  <span class="no">DS2015</span> <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(<span class="kw">DAI</span> <span class="kw">=</span> <span class="fu">case_when</span>(<span class="no">ASMT</span> <span class="kw">==</span> <span class="fl">1</span> ~ <span class="fl">14</span>,
                         <span class="no">ASMT</span> <span class="kw">==</span> <span class="fl">2</span> ~ <span class="fl">22</span>,
                         <span class="no">ASMT</span> <span class="kw">==</span> <span class="fl">3</span> ~ <span class="fl">35</span>,
                         <span class="no">ASMT</span> <span class="kw">==</span> <span class="fl">4</span> ~ <span class="fl">49</span>,
                         <span class="no">ASMT</span> <span class="kw">==</span> <span class="fl">5</span> ~ <span class="fl">62</span>))

<span class="co"># Replace "N*" with a number for NRTE ------------------------------------------</span>
<span class="no">DS2015</span>$<span class="no">NRTE</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2015</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="st">"N0"</span>)] <span class="kw">&lt;-</span> <span class="fl">0</span>
<span class="no">DS2015</span>$<span class="no">NRTE</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2015</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="st">"N1"</span>)] <span class="kw">&lt;-</span> <span class="fl">100</span>
<span class="no">DS2015</span>$<span class="no">NRTE</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2015</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="st">"N2"</span>)] <span class="kw">&lt;-</span> <span class="fl">120</span>

<span class="co"># Add treatment numbers --------------------------------------------------------</span>
<span class="no">DS2015</span>$<span class="no">TRT</span> <span class="kw">&lt;-</span> <span class="fl">NA</span>
<span class="no">DS2015</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2015</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"PDL"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2015</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">0</span>)] <span class="kw">=</span> <span class="st">"PDL_N0"</span>
<span class="no">DS2015</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2015</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"PDL"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2015</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">100</span>)] <span class="kw">=</span> <span class="st">"PDL_N100"</span>
<span class="no">DS2015</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2015</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"PDL"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2015</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">120</span>)] <span class="kw">=</span> <span class="st">"PDL_N120"</span>
<span class="no">DS2015</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2015</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"AWD"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2015</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">0</span>)] <span class="kw">=</span> <span class="st">"AWD_N0"</span>
<span class="no">DS2015</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2015</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"AWD"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2015</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">100</span>)] <span class="kw">=</span> <span class="st">"AWD_N100"</span>
<span class="no">DS2015</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2015</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"AWD"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2015</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">120</span>)] <span class="kw">=</span> <span class="st">"AWD_N120"</span>

<span class="no">DS2015</span>$<span class="no">YEAR</span> <span class="kw">&lt;-</span> <span class="fu"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(<span class="no">DS2015</span>$<span class="no">DATE</span>)

<span class="no">DS2015</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="fl">24</span>, <span class="kw">each</span> <span class="kw">=</span> <span class="fl">432</span>)

<span class="co"># Arrange columns --------------------------------------------------------------</span>
<span class="no">DS2015</span> <span class="kw">&lt;-</span>
  <span class="no">DS2015</span> <span class="kw">%&gt;%</span> <span class="fu">select</span>(
    <span class="no">YEAR</span>,
    <span class="no">DATE</span>,
    <span class="no">ASMT</span>,
    <span class="no">DAI</span>,
    <span class="no">REP</span>,
    <span class="no">PLOT</span>,
    <span class="no">TRT</span>,
    <span class="no">SMPL</span>,
    <span class="no">HILL</span>,
    <span class="no">TIL</span>,
    <span class="no">LEAF</span>,
    <span class="no">GL</span>,
    <span class="no">DL</span>,
    <span class="no">TShB_incidence</span>,
    <span class="no">TIL_ShB</span>,
    <span class="no">LEAF_ShB</span>,
    <span class="no">WMGT</span>,
    <span class="no">NRTE</span>
  ) <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(<span class="kw">REP</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="no">REP</span>),
         <span class="kw">HILL</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="no">HILL</span>))

<span class="no">DS2015</span>$<span class="no">LEAF_ShB</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(<span class="no">DS2015</span>$<span class="no">LEAF_ShB</span>)

<span class="no">DS2015</span> <span class="kw">&lt;-</span> <span class="fu">arrange</span>(<span class="no">DS2015</span>, <span class="no">ASMT</span>, <span class="no">PLOT</span>)

<span class="co"># Create new columns of days to calculate AUDPS -------------------------------</span>

<span class="no">DAYS</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span>(<span class="no">files</span>, <span class="fl">73</span>, <span class="fl">74</span>))

<span class="no">DS2015</span>$<span class="no">DAYS</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">0</span>, <span class="fl">10368</span>), <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/diff.html">diff</a></span>(<span class="no">DAYS</span>), <span class="kw">each</span> <span class="kw">=</span> <span class="fl">10368</span>))

<span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span>(<span class="no">files</span>, <span class="no">reformat</span>)</pre></body></html></div>
</div>
<div id="experiment-1" class="section level2">
<h2 class="hasAnchor">
<a href="#experiment-1" class="anchor"></a>2016 Experiment</h2>
<p>Preprocess 2016 data for all assessments</p>
<ol style="list-style-type: decimal">
<li><p>Clean up date format and fill empty dates</p></li>
<li><p>Fill empty NTIL (for same hill, not missing values)</p></li>
<li><p>Fill empty NTShB (for same hill, not missing values)</p></li>
<li><p>Add column with number of days after inoculation (DAI)</p></li>
</ol>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># First assessment -------------------------------------------------------------</span>
<span class="no">DS2016_A1</span> <span class="kw">&lt;-</span>
  <span class="fu">read_csv</span>(<span class="st">"https://zenodo.org/record/3889800/files/DS2016_Raw_1.csv?download=1"</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   DATE = col_character(),</span>
<span class="co">#&gt;   REP = col_double(),</span>
<span class="co">#&gt;   WMGT = col_character(),</span>
<span class="co">#&gt;   NRTE = col_character(),</span>
<span class="co">#&gt;   SMPL = col_character(),</span>
<span class="co">#&gt;   HILL = col_double(),</span>
<span class="co">#&gt;   NTIL = col_double(),</span>
<span class="co">#&gt;   NTShB = col_double(),</span>
<span class="co">#&gt;   NSHShB = col_double(),</span>
<span class="co">#&gt;   TIL = col_double(),</span>
<span class="co">#&gt;   GL = col_double(),</span>
<span class="co">#&gt;   DL = col_double(),</span>
<span class="co">#&gt;   ShBL1 = col_double(),</span>
<span class="co">#&gt;   ShBL2 = col_double(),</span>
<span class="co">#&gt;   ShBL3 = col_double(),</span>
<span class="co">#&gt;   ShBL4 = col_double(),</span>
<span class="co">#&gt;   ShBL5 = col_double(),</span>
<span class="co">#&gt;   ShBL6 = col_double()</span>
<span class="co">#&gt; )</span>
<span class="co"># Fill missing values in NTIL and NTShB</span>
<span class="no">DS2016_A1</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016_A1</span> <span class="kw">%&gt;%</span> <span class="fu">fill</span>(<span class="no">NTIL</span>)
<span class="no">DS2016_A1</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016_A1</span> <span class="kw">%&gt;%</span> <span class="fu">fill</span>(<span class="no">NTShB</span>)

<span class="co"># Fill dates</span>
<span class="no">DS2016_A1</span>[, <span class="fl">1</span>] <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2016-03-15"</span>, <span class="kw">origin</span> <span class="kw">=</span> <span class="st">"1970-01-01"</span>)
<span class="no">DS2016_A1</span>$<span class="no">ASMT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2016_A1</span>))
<span class="no">DS2016_A1</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="fl">16</span>, <span class="kw">each</span> <span class="kw">=</span> <span class="fl">72</span>)

<span class="co"># Fill days after inoculation</span>
<span class="no">DS2016_A1</span>$<span class="no">DAI</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">14</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2016_A1</span>))

<span class="co"># Second assessment -----------------------------------------------------------</span>
<span class="no">DS2016_A2</span> <span class="kw">&lt;-</span>
  <span class="fu">read_csv</span>(<span class="st">"https://zenodo.org/record/3889800/files/DS2016_Raw_2.csv?download=1"</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   DATE = col_character(),</span>
<span class="co">#&gt;   REP = col_double(),</span>
<span class="co">#&gt;   WMGT = col_character(),</span>
<span class="co">#&gt;   NRTE = col_character(),</span>
<span class="co">#&gt;   SMPL = col_character(),</span>
<span class="co">#&gt;   HILL = col_double(),</span>
<span class="co">#&gt;   NTIL = col_double(),</span>
<span class="co">#&gt;   NTShB = col_double(),</span>
<span class="co">#&gt;   NSHShB = col_double(),</span>
<span class="co">#&gt;   TIL = col_double(),</span>
<span class="co">#&gt;   GL = col_double(),</span>
<span class="co">#&gt;   DL = col_double(),</span>
<span class="co">#&gt;   ShBL1 = col_double(),</span>
<span class="co">#&gt;   ShBL2 = col_double(),</span>
<span class="co">#&gt;   ShBL3 = col_double(),</span>
<span class="co">#&gt;   ShBL4 = col_double(),</span>
<span class="co">#&gt;   ShBL5 = col_double(),</span>
<span class="co">#&gt;   ShBL6 = col_double()</span>
<span class="co">#&gt; )</span>
<span class="no">DS2016_A2</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016_A2</span> <span class="kw">%&gt;%</span> <span class="fu">fill</span>(<span class="no">NTIL</span>)
<span class="no">DS2016_A2</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016_A2</span> <span class="kw">%&gt;%</span> <span class="fu">fill</span>(<span class="no">NTShB</span>)

<span class="co"># Fill dates</span>
<span class="no">DS2016_A2</span>[, <span class="fl">1</span>] <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2016-03-29"</span>, <span class="kw">origin</span> <span class="kw">=</span> <span class="st">"1970-01-01"</span>)
<span class="no">DS2016_A2</span>$<span class="no">ASMT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2016_A2</span>))
<span class="no">DS2016_A2</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="fl">16</span>, <span class="kw">each</span> <span class="kw">=</span> <span class="fl">72</span>)

<span class="co"># Fill days after inoculation</span>
<span class="no">DS2016_A2</span>$<span class="no">DAI</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">28</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2016_A2</span>))

<span class="co"># Third assessment ------------------------------------------------------------</span>
<span class="no">DS2016_A3</span> <span class="kw">&lt;-</span>
  <span class="fu">read_csv</span>(<span class="st">"https://zenodo.org/record/3889800/files/DS2016_Raw_3.csv?download=1"</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   DATE = col_character(),</span>
<span class="co">#&gt;   REP = col_double(),</span>
<span class="co">#&gt;   WMGT = col_character(),</span>
<span class="co">#&gt;   NRTE = col_character(),</span>
<span class="co">#&gt;   SMPL = col_character(),</span>
<span class="co">#&gt;   HILL = col_double(),</span>
<span class="co">#&gt;   NTIL = col_double(),</span>
<span class="co">#&gt;   NTShB = col_double(),</span>
<span class="co">#&gt;   NSHShB = col_double(),</span>
<span class="co">#&gt;   TIL = col_double(),</span>
<span class="co">#&gt;   GL = col_double(),</span>
<span class="co">#&gt;   DL = col_double(),</span>
<span class="co">#&gt;   ShBL1 = col_double(),</span>
<span class="co">#&gt;   ShBL2 = col_double(),</span>
<span class="co">#&gt;   ShBL3 = col_double(),</span>
<span class="co">#&gt;   ShBL4 = col_double(),</span>
<span class="co">#&gt;   ShBL5 = col_double(),</span>
<span class="co">#&gt;   ShBL6 = col_logical()</span>
<span class="co">#&gt; )</span>
<span class="no">DS2016_A3</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016_A3</span> <span class="kw">%&gt;%</span> <span class="fu">fill</span>(<span class="no">NTIL</span>)
<span class="no">DS2016_A3</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016_A3</span> <span class="kw">%&gt;%</span> <span class="fu">fill</span>(<span class="no">NTShB</span>)

<span class="co"># Fill dates</span>
<span class="no">DS2016_A3</span>[, <span class="fl">1</span>] <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2016-04-12"</span>, <span class="kw">origin</span> <span class="kw">=</span> <span class="st">"1970-01-01"</span>)
<span class="no">DS2016_A3</span>$<span class="no">ASMT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2016_A3</span>))
<span class="no">DS2016_A3</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="fl">16</span>, <span class="kw">each</span> <span class="kw">=</span> <span class="fl">72</span>)

<span class="co"># Fill days after inoculation</span>
<span class="no">DS2016_A3</span>$<span class="no">DAI</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">43</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2016_A3</span>))

<span class="co"># Fourth assessment ------------------------------------------------------------</span>
<span class="no">DS2016_A4</span> <span class="kw">&lt;-</span>
  <span class="fu">read_csv</span>(<span class="st">"https://zenodo.org/record/3889800/files/DS2016_Raw_4.csv?download=1"</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   DATE = col_character(),</span>
<span class="co">#&gt;   REP = col_double(),</span>
<span class="co">#&gt;   WMGT = col_character(),</span>
<span class="co">#&gt;   NRTE = col_character(),</span>
<span class="co">#&gt;   SMPL = col_character(),</span>
<span class="co">#&gt;   HILL = col_double(),</span>
<span class="co">#&gt;   NTIL = col_double(),</span>
<span class="co">#&gt;   NTShB = col_double(),</span>
<span class="co">#&gt;   NSHShB = col_double(),</span>
<span class="co">#&gt;   TIL = col_double(),</span>
<span class="co">#&gt;   GL = col_double(),</span>
<span class="co">#&gt;   DL = col_double(),</span>
<span class="co">#&gt;   ShBL1 = col_double(),</span>
<span class="co">#&gt;   ShBL2 = col_double(),</span>
<span class="co">#&gt;   ShBL3 = col_double(),</span>
<span class="co">#&gt;   ShBL4 = col_logical(),</span>
<span class="co">#&gt;   ShBL5 = col_logical(),</span>
<span class="co">#&gt;   ShBL6 = col_logical()</span>
<span class="co">#&gt; )</span>
<span class="no">DS2016_A4</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016_A4</span> <span class="kw">%&gt;%</span> <span class="fu">fill</span>(<span class="no">NTIL</span>)
<span class="no">DS2016_A4</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016_A4</span> <span class="kw">%&gt;%</span> <span class="fu">fill</span>(<span class="no">NTShB</span>)

<span class="co"># Fill dates</span>
<span class="no">DS2016_A4</span>[, <span class="fl">1</span>] <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2016-04-26"</span>, <span class="kw">origin</span> <span class="kw">=</span> <span class="st">"1970-01-01"</span>)
<span class="no">DS2016_A4</span>$<span class="no">ASMT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">4</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2016_A4</span>))
<span class="no">DS2016_A4</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="fl">16</span>, <span class="kw">each</span> <span class="kw">=</span> <span class="fl">72</span>)

<span class="co"># Fill days after inoculation</span>
<span class="no">DS2016_A4</span>$<span class="no">DAI</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">59</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2016_A4</span>))

<span class="co"># Combine all assessments ------------------------------------------------------</span>
<span class="no">DS2016</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">DS2016_A1</span>),
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">DS2016_A2</span>),
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">DS2016_A3</span>),
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">DS2016_A4</span>)
)

<span class="co"># Set any NA values to 0, per Dr. Castilla on 060317 ---------------------------</span>
<span class="co"># "We used to put zeroes on the data sheets, but Dr. Savary later suggested that</span>
<span class="co"># we leave the cells blank because it has caused difficulties in proof reading</span>
<span class="co"># the data. We also found more mistakes in data encoding when there are a lot</span>
<span class="co"># of zeroes."</span>
<span class="co"># Set any NA values to 0, per Dr. Castilla on 060317 ---------------------------</span>

<span class="no">DS2016</span>[<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">DS2016</span>)] <span class="kw">&lt;-</span> <span class="fl">0</span>

<span class="co"># Replace "N*" with a number for NRTE ------------------------------------------</span>
<span class="no">DS2016</span>$<span class="no">NRTE</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2016</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="st">"N1"</span>)] <span class="kw">=</span> <span class="fl">60</span>
<span class="no">DS2016</span>$<span class="no">NRTE</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2016</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="st">"N2"</span>)] <span class="kw">=</span> <span class="fl">180</span>

<span class="co"># Add treatment numbers --------------------------------------------------------</span>
<span class="no">DS2016</span>$<span class="no">TRT</span> <span class="kw">&lt;-</span> <span class="fl">NA</span>
<span class="no">DS2016</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2016</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"PDL"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2016</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">60</span>)] <span class="kw">=</span> <span class="st">"PDL_N60"</span>
<span class="no">DS2016</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2016</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"PDL"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2016</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">180</span>)] <span class="kw">=</span> <span class="st">"PDL_N180"</span>
<span class="no">DS2016</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2016</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"AWD"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2016</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">60</span>)] <span class="kw">=</span> <span class="st">"AWD_N60"</span>
<span class="no">DS2016</span>$<span class="no">TRT</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DS2016</span>$<span class="no">WMGT</span> <span class="kw">==</span> <span class="st">"AWD"</span> <span class="kw">&amp;</span>
                   <span class="no">DS2016</span>$<span class="no">NRTE</span> <span class="kw">==</span> <span class="fl">180</span>)] <span class="kw">=</span> <span class="st">"AWD_N180"</span>

<span class="no">DS2016</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016</span> <span class="kw">%&gt;%</span>
  <span class="fu">gather</span>(
    <span class="no">LEAF</span>,
    <span class="no">LEAF_ShB</span>,
    <span class="fu">starts_with</span>(<span class="st">"ShBL"</span>),
    -<span class="no">DATE</span>,
    -<span class="no">ASMT</span>,
    -<span class="no">DAI</span>,
    -<span class="no">PLOT</span>,
    -<span class="no">TRT</span>,
    -<span class="no">REP</span>,
    -<span class="no">WMGT</span>,
    -<span class="no">SMPL</span>,
    -<span class="no">NRTE</span>,
    -<span class="no">HILL</span>,
    -<span class="no">NTIL</span>,
    -<span class="no">GL</span>,
    -<span class="no">DL</span>,
    -<span class="no">NTShB</span>,
    -<span class="no">NSHShB</span>,
    -<span class="no">TIL</span>
  )

<span class="co"># reclassify LEAF column to leaf numbers 1...6</span>

<span class="no">DS2016</span>$<span class="no">LEAF</span>[<span class="no">DS2016</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="st">"ShBL1"</span>] <span class="kw">&lt;-</span> <span class="fl">1</span>
<span class="no">DS2016</span>$<span class="no">LEAF</span>[<span class="no">DS2016</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="st">"ShBL2"</span>] <span class="kw">&lt;-</span> <span class="fl">2</span>
<span class="no">DS2016</span>$<span class="no">LEAF</span>[<span class="no">DS2016</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="st">"ShBL3"</span>] <span class="kw">&lt;-</span> <span class="fl">3</span>
<span class="no">DS2016</span>$<span class="no">LEAF</span>[<span class="no">DS2016</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="st">"ShBL4"</span>] <span class="kw">&lt;-</span> <span class="fl">4</span>
<span class="no">DS2016</span>$<span class="no">LEAF</span>[<span class="no">DS2016</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="st">"ShBL5"</span>] <span class="kw">&lt;-</span> <span class="fl">5</span>
<span class="no">DS2016</span>$<span class="no">LEAF</span>[<span class="no">DS2016</span>$<span class="no">LEAF</span> <span class="kw">==</span> <span class="st">"ShBL6"</span>] <span class="kw">&lt;-</span> <span class="fl">6</span>

<span class="co"># before classifying incidence, set any values where there are more infected</span>
<span class="co"># tillers in the hill than there are tillers to NA for both columns</span>

<span class="no">DS2016</span>$<span class="no">NTIL</span>[<span class="no">DS2016</span>$<span class="no">NTIL</span> <span class="kw">&lt;</span> <span class="no">DS2016</span>$<span class="no">NTShB</span>] <span class="kw">&lt;-</span> <span class="fl">NA</span>
<span class="no">DS2016</span>$<span class="no">NTShB</span>[<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">DS2016</span>$<span class="no">NTIL</span>)] <span class="kw">&lt;-</span> <span class="fl">NA</span>

<span class="co"># calculate tiller sheath blight incidence</span>
<span class="no">DS2016</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">DATE</span>, <span class="no">ASMT</span>, <span class="no">DAI</span>, <span class="no">REP</span>, <span class="no">PLOT</span>, <span class="no">TRT</span>, <span class="no">WMGT</span>, <span class="no">NRTE</span>, <span class="no">SMPL</span>, <span class="no">HILL</span>) <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(<span class="kw">TShB_incidence</span> <span class="kw">=</span> <span class="no">NTShB</span> / <span class="no">NTIL</span>)

<span class="no">DS2016</span> <span class="kw">&lt;-</span> <span class="fu">rename</span>(<span class="no">DS2016</span>, <span class="kw">TIL_ShB</span> <span class="kw">=</span> <span class="no">NSHShB</span>)

<span class="no">DS2016</span>$<span class="no">YEAR</span> <span class="kw">&lt;-</span> <span class="fu"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(<span class="no">DS2016</span>$<span class="no">DATE</span>)
<span class="no">DS2016</span>$<span class="no">LEAF_ShB</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(<span class="no">DS2016</span>$<span class="no">LEAF_ShB</span>)

<span class="no">DS2016</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016</span> <span class="kw">%&gt;%</span> <span class="fu">select</span>(
    <span class="no">YEAR</span>,
    <span class="no">DATE</span>,
    <span class="no">ASMT</span>,
    <span class="no">DAI</span>,
    <span class="no">REP</span>,
    <span class="no">PLOT</span>,
    <span class="no">TRT</span>,
    <span class="no">SMPL</span>,
    <span class="no">HILL</span>,
    <span class="no">TIL</span>,
    <span class="no">LEAF</span>,
    <span class="no">GL</span>,
    <span class="no">DL</span>,
    <span class="no">TShB_incidence</span>,
    <span class="no">TIL_ShB</span>,
    <span class="no">LEAF_ShB</span>,
    <span class="no">WMGT</span>,
    <span class="no">NRTE</span>
  )

<span class="no">DS2016</span> <span class="kw">&lt;-</span> <span class="fu">arrange</span>(<span class="no">DS2016</span>, <span class="no">ASMT</span>, <span class="no">PLOT</span>)

<span class="co"># Create new columns of days to calculate AUDPS -------------------------------</span>

<span class="no">DATE_1_2016</span> <span class="kw">&lt;-</span> <span class="no">DATE_2_2016</span> <span class="kw">&lt;-</span> <span class="no">DS2016</span>$<span class="no">DATE</span>
<span class="no">DATE_1_2016</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DATE_1_2016</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(<span class="no">DATE_1_2016</span>))] <span class="kw">&lt;-</span> <span class="fl">NA</span>
<span class="no">DATE_2_2016</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">DATE_2_2016</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(<span class="no">DATE_2_2016</span>))] <span class="kw">&lt;-</span> <span class="fl">NA</span>

<span class="no">DATE_1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span>(<span class="no">DATE_1_2016</span>)
<span class="no">DATE_2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span>(<span class="no">DATE_2_2016</span>)

<span class="no">DAYS_2016</span> <span class="kw">&lt;-</span> <span class="fu"><a href="http://lubridate.tidyverse.org/reference/time_length.html">time_length</a></span>(<span class="no">DATE_1</span> - <span class="no">DATE_2</span>, <span class="kw">unit</span> <span class="kw">=</span> <span class="st">"day"</span>)
<span class="no">DS2016</span>$<span class="no">DAYS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">DS2016</span>) - <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">DAYS_2016</span>)), <span class="no">DAYS_2016</span>)

<span class="co"># clean up workspace ------------------------------------------------------------</span>

<span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span>(
  <span class="no">DS2016_A1</span>,
  <span class="no">DS2016_A2</span>,
  <span class="no">DS2016_A3</span>,
  <span class="no">DS2016_A4</span>,
  <span class="no">DATE_1</span>,
  <span class="no">DATE_1_2016</span>,
  <span class="no">DATE_2</span>,
  <span class="no">DATE_2_2016</span>,
  <span class="no">DAYS_2016</span>
)

<span class="co"># Arrange columns --------------------------------------------------------------</span>
<span class="no">DS2016</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016</span> <span class="kw">%&gt;%</span> <span class="fu">select</span>(
    <span class="no">YEAR</span>,
    <span class="no">DATE</span>,
    <span class="no">ASMT</span>,
    <span class="no">DAI</span>,
    <span class="no">REP</span>,
    <span class="no">PLOT</span>,
    <span class="no">TRT</span>,
    <span class="no">SMPL</span>,
    <span class="no">HILL</span>,
    <span class="no">TIL</span>,
    <span class="no">LEAF</span>,
    <span class="no">GL</span>,
    <span class="no">DL</span>,
    <span class="no">TShB_incidence</span>,
    <span class="no">TIL_ShB</span>,
    <span class="no">LEAF_ShB</span>,
    <span class="no">WMGT</span>,
    <span class="no">NRTE</span>,
    <span class="no">DAYS</span>
  )</pre></body></html></div>
</div>
</div>
<div id="combine-2015-and-2016-data" class="section level1">
<h1 class="hasAnchor">
<a href="#combine-2015-and-2016-data" class="anchor"></a>Combine 2015 and 2016 Data</h1>
<p>First join the data from the two experiments to perform some formatting and reordering on the full set of data. Then create new data frames with the reformatted data.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="co"># Join the 2015 and 2016 Data into one Tibble ----------------------------------</span>


<span class="no">RAW_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">DS2015</span>, <span class="no">DS2016</span>)

<span class="co"># convert columns to factor ----------------------------------------------------</span>
<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="no">RAW_data</span> <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(
    <span class="kw">YEAR</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">YEAR</span>),
    <span class="kw">ASMT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">ASMT</span>),
    <span class="kw">PLOT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">PLOT</span>),
    <span class="kw">REP</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">REP</span>),
    <span class="kw">TRT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">TRT</span>),
    <span class="kw">WMGT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">WMGT</span>),
    <span class="kw">NRTE</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">NRTE</span>),
    <span class="kw">SMPL</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">SMPL</span>),
    <span class="kw">HILL</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">HILL</span>),
    <span class="kw">TIL</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">TIL</span>),
    <span class="kw">LEAF</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">LEAF</span>)
  )

<span class="co"># reorder the treatments by level/year - low to high, 2015-2016 for graphs -----</span>
<span class="no">RAW_data</span>$<span class="no">NRTE</span> <span class="kw">&lt;-</span>
  <span class="fu">fct_relevel</span>(<span class="no">RAW_data</span>$<span class="no">NRTE</span>,
              <span class="st">"0"</span>,
              <span class="st">"100"</span>,
              <span class="st">"120"</span>,
              <span class="st">"60"</span>,
              <span class="st">"180"</span>)

<span class="no">RAW_data</span>$<span class="no">TRT</span> <span class="kw">&lt;-</span>
  <span class="fu">fct_relevel</span>(
    <span class="no">RAW_data</span>$<span class="no">TRT</span>,
    <span class="st">"AWD_N0"</span>,
    <span class="st">"AWD_N100"</span>,
    <span class="st">"AWD_N120"</span>,
    <span class="st">"AWD_N60"</span>,
    <span class="st">"AWD_N180"</span>,
    <span class="st">"PDL_N0"</span>,
    <span class="st">"PDL_N100"</span>,
    <span class="st">"PDL_N120"</span>,
    <span class="st">"PDL_N60"</span>,
    <span class="st">"PDL_N180"</span>
  )

<span class="co"># add column with midpoint % tiller ShB severity -------------------------------</span>
<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="fu">mutate</span>(
    <span class="no">RAW_data</span>,
    <span class="kw">PERC_TIL_ShB</span> <span class="kw">=</span> <span class="fu">case_when</span>(
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">0</span> ~ <span class="fl">0</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">1</span> ~ <span class="fl">1</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">2</span> ~ <span class="fl">2.5</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">3</span> ~ <span class="fl">10</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">4</span> ~ <span class="fl">32.5</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">75</span>
    )
  )

<span class="co"># add column with midpoint +1  % tiller ShB severity ---------------------------</span>

<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="fu">mutate</span>(
    <span class="no">RAW_data</span>,
    <span class="kw">PERC_TIL_ShB_1</span> <span class="kw">=</span> <span class="fu">case_when</span>(
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">0</span> ~ <span class="fl">1</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">1</span> ~ <span class="fl">2.5</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">2</span> ~ <span class="fl">10</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">3</span> ~ <span class="fl">32.5</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">4</span> ~ <span class="fl">75</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">100</span>
    )
  )

<span class="co"># add column with midpoint % leaf ShB severity ---------------------------------</span>
<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="fu">mutate</span>(
    <span class="no">RAW_data</span>,
    <span class="kw">PERC_LEAF_ShB</span> <span class="kw">=</span> <span class="fu">case_when</span>(
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">0</span> ~ <span class="fl">0</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">1</span> ~ <span class="fl">1</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">2</span> ~ <span class="fl">2.5</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">3</span> ~ <span class="fl">10</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">4</span> ~ <span class="fl">32.5</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">75</span>
    )
  )

<span class="co"># add column with midpoint +1  % leaf ShB severity -----------------------------</span>
<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="fu">mutate</span>(
    <span class="no">RAW_data</span>,
    <span class="kw">PERC_LEAF_ShB_1</span> <span class="kw">=</span> <span class="fu">case_when</span>(
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">0</span> ~ <span class="fl">1</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">1</span> ~ <span class="fl">2.5</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">2</span> ~ <span class="fl">10</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">3</span> ~ <span class="fl">32.5</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">4</span> ~ <span class="fl">75</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">100</span>
    )
  )

<span class="no">DS2015</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">RAW_data</span>, <span class="no">YEAR</span> <span class="kw">==</span> <span class="st">"2015"</span>)
<span class="no">DS2016</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">RAW_data</span>, <span class="no">YEAR</span> <span class="kw">==</span> <span class="st">"2016"</span>)</pre></body></html></div>
</div>
<div id="calculating-area-under-disease-progress-curve-audpc-area-under-the-disease-progress-stairs-audps" class="section level1">
<h1 class="hasAnchor">
<a href="#calculating-area-under-disease-progress-curve-audpc-area-under-the-disease-progress-stairs-audps" class="anchor"></a>Calculating Area Under Disease Progress Curve (AUDPC) Area Under the Disease Progress Stairs (AUDPS)</h1>
<p>Because the data were collected on an ordinal scale, but not evenly spaced, the data are converted to the midpoint value of the percent range for disease severity index and then the AUDPC and AUDPS are calculated from that.</p>
<div id="area-calculations" class="section level2">
<h2 class="hasAnchor">
<a href="#area-calculations" class="anchor"></a>2015 Area Calculations</h2>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">RAW_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">DS2015</span>, <span class="no">DS2016</span>)

<span class="co"># convert columns to factor ----------------------------------------------------</span>
<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="no">RAW_data</span> <span class="kw">%&gt;%</span>
  <span class="fu">mutate</span>(
    <span class="kw">YEAR</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">YEAR</span>),
    <span class="kw">ASMT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">ASMT</span>),
    <span class="kw">PLOT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">PLOT</span>),
    <span class="kw">REP</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">REP</span>),
    <span class="kw">TRT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">TRT</span>),
    <span class="kw">WMGT</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">WMGT</span>),
    <span class="kw">NRTE</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">NRTE</span>),
    <span class="kw">SMPL</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">SMPL</span>),
    <span class="kw">HILL</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">HILL</span>),
    <span class="kw">TIL</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">TIL</span>),
    <span class="kw">LEAF</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">LEAF</span>)
  )

<span class="co"># reorder the treatments by level/year - low to high, 2015-2016 for graphs -----</span>
<span class="no">RAW_data</span>$<span class="no">NRTE</span> <span class="kw">&lt;-</span>
  <span class="fu">fct_relevel</span>(<span class="no">RAW_data</span>$<span class="no">NRTE</span>,
              <span class="st">"0"</span>,
              <span class="st">"100"</span>,
              <span class="st">"120"</span>,
              <span class="st">"60"</span>,
              <span class="st">"180"</span>)

<span class="no">RAW_data</span>$<span class="no">TRT</span> <span class="kw">&lt;-</span>
  <span class="fu">fct_relevel</span>(
    <span class="no">RAW_data</span>$<span class="no">TRT</span>,
    <span class="st">"AWD_N0"</span>,
    <span class="st">"AWD_N100"</span>,
    <span class="st">"AWD_N120"</span>,
    <span class="st">"AWD_N60"</span>,
    <span class="st">"AWD_N180"</span>,
    <span class="st">"PDL_N0"</span>,
    <span class="st">"PDL_N100"</span>,
    <span class="st">"PDL_N120"</span>,
    <span class="st">"PDL_N60"</span>,
    <span class="st">"PDL_N180"</span>
  )

<span class="co"># add column with midpoint % tiller ShB severity -------------------------------</span>
<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="fu">mutate</span>(
    <span class="no">RAW_data</span>,
    <span class="kw">PERC_TIL_ShB</span> <span class="kw">=</span> <span class="fu">case_when</span>(
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">0</span> ~ <span class="fl">0</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">1</span> ~ <span class="fl">1</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">2</span> ~ <span class="fl">2.5</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">3</span> ~ <span class="fl">10</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">4</span> ~ <span class="fl">32.5</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">75</span>
    )
  )

<span class="co"># add column with midpoint +1  % tiller ShB severity ---------------------------</span>
<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="fu">mutate</span>(
    <span class="no">RAW_data</span>,
    <span class="kw">PERC_TIL_ShB_1</span> <span class="kw">=</span> <span class="fu">case_when</span>(
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">0</span> ~ <span class="fl">1</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">1</span> ~ <span class="fl">2.5</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">2</span> ~ <span class="fl">10</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">3</span> ~ <span class="fl">32.5</span>,
      <span class="no">TIL_ShB</span> <span class="kw">==</span> <span class="fl">4</span> ~ <span class="fl">75</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">100</span>
    )
  )

<span class="co"># add column with midpoint % leaf ShB severity ---------------------------------</span>
<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="fu">mutate</span>(
    <span class="no">RAW_data</span>,
    <span class="kw">PERC_LEAF_ShB</span> <span class="kw">=</span> <span class="fu">case_when</span>(
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">0</span> ~ <span class="fl">0</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">1</span> ~ <span class="fl">1</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">2</span> ~ <span class="fl">2.5</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">3</span> ~ <span class="fl">10</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">4</span> ~ <span class="fl">32.5</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">75</span>
    )
  )

<span class="co"># add column with midpoint +1  % leaf ShB severity -----------------------------</span>
<span class="no">RAW_data</span> <span class="kw">&lt;-</span>
  <span class="fu">mutate</span>(
    <span class="no">RAW_data</span>,
    <span class="kw">PERC_LEAF_ShB_1</span> <span class="kw">=</span> <span class="fu">case_when</span>(
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">0</span> ~ <span class="fl">1</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">1</span> ~ <span class="fl">2.5</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">2</span> ~ <span class="fl">10</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">3</span> ~ <span class="fl">32.5</span>,
      <span class="no">LEAF_ShB</span> <span class="kw">==</span> <span class="fl">4</span> ~ <span class="fl">75</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">100</span>
    )
  )

<span class="no">DS2015</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">RAW_data</span>, <span class="no">YEAR</span> <span class="kw">==</span> <span class="st">"2015"</span>)
<span class="no">DS2016</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="no">RAW_data</span>, <span class="no">YEAR</span> <span class="kw">==</span> <span class="st">"2016"</span>)

<span class="no">TShB_inc_15</span> <span class="kw">&lt;-</span>
  <span class="no">DS2015</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(
    <span class="kw">PLOT_TShB_inc</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">TShB_incidence</span>),
    <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
    <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>
  ) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">TShB_inc_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">TShB_inc_15</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_TShB_inc"</span>)

<span class="no">TShB_sev_15</span> <span class="kw">&lt;-</span>
  <span class="no">DS2015</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(
    <span class="kw">PLOT_TShB_severity</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">TIL_ShB</span>),
    <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
    <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>
  ) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">TShB_sev_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">TShB_sev_15</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_TShB_severity"</span>)

<span class="no">TShB_perc_15</span> <span class="kw">&lt;-</span>
  <span class="no">DS2015</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAI</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(<span class="kw">PLOT_TShB_percent</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">PERC_TIL_ShB</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
            <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">TShB_perc_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">TShB_perc_15</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_TShB_percent"</span>)

<span class="co"># 2015 Leaf Severity setup -----------------------------------------------------</span>
<span class="no">LShB_sev_15</span> <span class="kw">&lt;-</span>
  <span class="no">DS2015</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAI</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(<span class="kw">PLOT_LShB_severity</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">LEAF_ShB</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
            <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">LShB_sev_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">LShB_sev_15</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_LShB_severity"</span>)

<span class="no">LShB_perc_15</span> <span class="kw">&lt;-</span>
  <span class="no">DS2015</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAI</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(<span class="kw">PLOT_LShB_percent</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">PERC_LEAF_ShB</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
            <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">LShB_perc_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">LShB_perc_15</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_LShB_percent"</span>)

<span class="no">TShB_inc_15</span> <span class="kw">&lt;-</span>
  <span class="no">DS2015</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(<span class="kw">PLOT_TShB_incidence</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">TShB_incidence</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
            <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="co"># AUDPS data frame for incidence</span>
<span class="no">TShB_inc_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_inc_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_inc_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">TShB_sev_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_sev_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_sev_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">LShB_sev_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">LShB_sev_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">LShB_sev_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">TShB_percent_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_perc_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_perc_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">LShB_percent_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">LShB_perc_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">LShB_perc_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">AUDPS_15</span> <span class="kw">&lt;-</span>
  <span class="fu">as_tibble</span>(
    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(
      <span class="kw">PLOT</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">24</span>,
      <span class="no">TShB_inc_AUDPS</span>,
      <span class="no">TShB_sev_AUDPS</span>,
      <span class="no">TShB_percent_AUDPS</span>,
      <span class="no">LShB_sev_AUDPS</span>,
      <span class="no">LShB_percent_AUDPS</span>
    )
  )

<span class="no">AUDPS_15</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">AUDPS_15</span>$<span class="no">PLOT</span>)
<span class="no">TShB_inc_15</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">TShB_inc_15</span>$<span class="no">PLOT</span>)

<span class="co"># AUDPC data frame for incidence</span>
<span class="no">TShB_inc_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_inc_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_inc_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">TShB_sev_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_sev_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_sev_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">LShB_sev_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">LShB_sev_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">LShB_sev_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">TShB_percent_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_perc_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_perc_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">LShB_percent_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">LShB_perc_wide</span>[, <span class="fl">2</span>:<span class="fl">6</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">LShB_perc_15</span>[<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>]))

<span class="no">AUDPC_15</span> <span class="kw">&lt;-</span>
  <span class="fu">as_tibble</span>(
    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(
      <span class="kw">PLOT</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">24</span>,
      <span class="no">TShB_inc_AUDPC</span>,
      <span class="no">TShB_sev_AUDPC</span>,
      <span class="no">TShB_percent_AUDPC</span>,
      <span class="no">LShB_sev_AUDPC</span>,
      <span class="no">LShB_percent_AUDPC</span>
    )
  )

<span class="no">AUDPC_15</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">AUDPC_15</span>$<span class="no">PLOT</span>)
<span class="no">TShB_inc_15</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">TShB_inc_15</span>$<span class="no">PLOT</span>)

<span class="co"># create final data frame of AUDPC_S</span>
<span class="no">ShB_15</span> <span class="kw">&lt;-</span> <span class="fu">left_join</span>(<span class="no">TShB_inc_15</span>, <span class="no">AUDPS_15</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"PLOT"</span>)
<span class="no">ShB_15</span> <span class="kw">&lt;-</span> <span class="fu">left_join</span>(<span class="no">ShB_15</span>, <span class="no">AUDPC_15</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"PLOT"</span>)</pre></body></html></div>
</div>
<div id="area-calculations-1" class="section level2">
<h2 class="hasAnchor">
<a href="#area-calculations-1" class="anchor"></a>2016 Area Calculations</h2>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">TShB_inc_16</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(<span class="kw">PLOT_TShB_incidence</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">TShB_incidence</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
            <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">TShB_inc_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">TShB_inc_16</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_TShB_incidence"</span>)

<span class="no">TShB_sev_16</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(<span class="kw">PLOT_TShB_severity</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">TIL_ShB</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
            <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">TShB_sev_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">TShB_sev_16</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_TShB_severity"</span>)

<span class="co"># 2016 Tiller Severity setup ---------------------------------------------------</span>

<span class="no">TShB_perc_16</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(<span class="kw">PLOT_TShB_percent</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">PERC_TIL_ShB</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
            <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">TShB_perc_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">TShB_perc_16</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_TShB_percent"</span>)

<span class="co"># 2016 Leaf Severity setup -----------------------------------------------------</span>

<span class="no">LShB_sev_16</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(<span class="kw">PLOT_LShB_severity</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">LEAF_ShB</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
            <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">LShB_sev_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">LShB_sev_16</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_LShB_severity"</span>)

<span class="no">LShB_perc_16</span> <span class="kw">&lt;-</span>
  <span class="no">DS2016</span> <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">YEAR</span>, <span class="no">REP</span>, <span class="no">TRT</span>, <span class="no">PLOT</span>, <span class="no">ASMT</span>, <span class="no">DAYS</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarise</span>(<span class="kw">PLOT_LShB_percent</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">PERC_LEAF_ShB</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>),
            <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"keep"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="no">PLOT</span>)

<span class="no">LShB_perc_wide</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span>(<span class="no">LShB_perc_16</span>, <span class="no">PLOT</span> ~ <span class="no">ASMT</span>, <span class="kw">value.var</span> <span class="kw">=</span> <span class="st">"PLOT_LShB_percent"</span>)

<span class="co"># 2016 audpS -------------------------------------------------------------------</span>

<span class="no">TShB_inc_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_inc_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_inc_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">TShB_sev_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_sev_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_sev_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">LShB_sev_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">LShB_sev_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">LShB_sev_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">TShB_percent_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_perc_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_perc_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">LShB_percent_AUDPS</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audps.html">audps</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">LShB_perc_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">LShB_perc_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">AUDPS_16</span> <span class="kw">&lt;-</span>
  <span class="fu">as_tibble</span>(
    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(
      <span class="kw">PLOT</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">16</span>,
      <span class="no">TShB_inc_AUDPS</span>,
      <span class="no">TShB_sev_AUDPS</span>,
      <span class="no">TShB_percent_AUDPS</span>,
      <span class="no">LShB_sev_AUDPS</span>,
      <span class="no">LShB_percent_AUDPS</span>
    )
  )

<span class="co"># 2016 audpC -------------------------------------------------------------------</span>

<span class="no">TShB_inc_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_inc_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_inc_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">TShB_sev_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_sev_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_sev_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">LShB_sev_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">LShB_sev_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">LShB_sev_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">TShB_percent_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">TShB_perc_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">TShB_perc_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">LShB_percent_AUDPC</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/agricolae/man/audpc.html">audpc</a></span>(<span class="kw">evaluation</span> <span class="kw">=</span> <span class="no">LShB_perc_wide</span>[, <span class="fl">2</span>:<span class="fl">5</span>],
        <span class="kw">dates</span> <span class="kw">=</span> <span class="fu">pull</span>(<span class="no">LShB_perc_16</span>[<span class="fl">1</span>:<span class="fl">4</span>, <span class="fl">6</span>]))

<span class="no">AUDPC_16</span> <span class="kw">&lt;-</span>
  <span class="fu">as_tibble</span>(
    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(
      <span class="kw">PLOT</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">16</span>,
      <span class="no">TShB_inc_AUDPC</span>,
      <span class="no">TShB_sev_AUDPC</span>,
      <span class="no">TShB_percent_AUDPC</span>,
      <span class="no">LShB_sev_AUDPC</span>,
      <span class="no">LShB_percent_AUDPC</span>
    )
  )

<span class="co"># add plot numbers to merge with the remaining treatment data</span>
<span class="no">AUDPS_16</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">AUDPS_16</span>$<span class="no">PLOT</span>)
<span class="no">AUDPC_16</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">AUDPC_16</span>$<span class="no">PLOT</span>)
<span class="no">TShB_inc_16</span>$<span class="no">PLOT</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">TShB_inc_16</span>$<span class="no">PLOT</span>)

<span class="no">ShB_16</span> <span class="kw">&lt;-</span> <span class="fu">left_join</span>(<span class="no">TShB_inc_16</span>, <span class="no">AUDPS_16</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"PLOT"</span>)
<span class="no">ShB_16</span> <span class="kw">&lt;-</span> <span class="fu">left_join</span>(<span class="no">ShB_16</span>, <span class="no">AUDPC_16</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"PLOT"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">ungroup</span>()</pre></body></html></div>
</div>
</div>
<div id="merge-audpc-and-audps-data" class="section level1">
<h1 class="hasAnchor">
<a href="#merge-audpc-and-audps-data" class="anchor"></a>Merge AUDPC and AUDPS Data</h1>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">AUDPC_S</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="fu">as_tibble</span>(<span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">ShB_15</span>, <span class="no">ShB_16</span>)))

<span class="no">AUDPC_S</span> <span class="kw">&lt;-</span> <span class="fu">separate</span>(
  <span class="kw">data</span> <span class="kw">=</span> <span class="no">AUDPC_S</span>,
  <span class="kw">col</span> <span class="kw">=</span> <span class="no">TRT</span>,
  <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"_"</span>,
  <span class="kw">into</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"WMGT"</span>, <span class="st">"NRTE"</span>)
)
<span class="no">AUDPC_S</span> <span class="kw">&lt;-</span> <span class="fu">mutate_at</span>(<span class="kw">.tbl</span> <span class="kw">=</span> <span class="no">AUDPC_S</span>,
                     <span class="kw">.funs</span> <span class="kw">=</span> <span class="no">factor</span>,
                     <span class="kw">.vars</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"WMGT"</span>, <span class="st">"NRTE"</span>))

<span class="co"># Arrange NRTE values</span>
<span class="no">AUDPC_S</span>$<span class="no">NRTE</span> <span class="kw">&lt;-</span>
  <span class="fu">fct_relevel</span>(<span class="no">AUDPC_S</span>$<span class="no">NRTE</span>,
              <span class="st">"N0"</span>,
              <span class="st">"N100"</span>,
              <span class="st">"N120"</span>,
              <span class="st">"N60"</span>,
              <span class="st">"N180"</span>)</pre></body></html></div>
</div>
<div id="n-rates" class="section level1">
<h1 class="hasAnchor">
<a href="#n-rates" class="anchor"></a>N rates</h1>
<p>Create a <code>tibble</code> of N rates and time of application used in this study.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">Year</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2015</span>,
                     <span class="fl">2015</span>,
                     <span class="fl">2015</span>,
                     <span class="fl">2016</span>,
                     <span class="fl">2016</span>))

<span class="no">`Total N (kg/ha)`</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,
                                  <span class="fl">100</span>,
                                  <span class="fl">120</span>,
                                  <span class="fl">60</span>,
                                  <span class="fl">180</span>))

<span class="no">`Basal N (kg/ha)`</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,
                                  <span class="fl">60</span>,
                                  <span class="fl">60</span>,
                                  <span class="fl">30</span>,
                                  <span class="fl">60</span>))

<span class="no">`Tillering N (kg/ha)`</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,
                                      <span class="fl">20</span>,
                                      <span class="fl">30</span>,
                                      <span class="fl">30</span>,
                                      <span class="fl">60</span>))

<span class="no">`Panicle Initiation N (kg/ha)`</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,
                                               <span class="fl">20</span>,
                                               <span class="fl">30</span>,
                                               <span class="fl">0</span>,
                                               <span class="fl">60</span>))

<span class="no">N_rates</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(
  <span class="no">Year</span>,
  <span class="no">`Total N (kg/ha)`</span>,
  <span class="no">`Basal N (kg/ha)`</span>,
  <span class="no">`Tillering N (kg/ha)`</span>,
  <span class="no">`Panicle Initiation N (kg/ha)`</span>
)

<span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span>(<span class="no">N_rates</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"N0"</span>, <span class="st">"N100"</span>, <span class="st">"N120"</span>, <span class="st">"N60"</span>, <span class="st">"N180"</span>)</pre></body></html></div>
</div>
<div id="save-data" class="section level1">
<h1 class="hasAnchor">
<a href="#save-data" class="anchor"></a>Save Data</h1>
<p>Save the data in this R package for analysis in the next vignette articles.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="kw">if</span> (!<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span>(<span class="st">"data"</span>)) {
  <span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(<span class="st">"data"</span>, <span class="kw">recursive</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
}

<span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html">use_data</a></span>(<span class="no">RAW_data</span>,
         <span class="kw">compress</span> <span class="kw">=</span> <span class="st">"bzip2"</span>,
         <span class="kw">overwrite</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html">use_data</a></span>(<span class="no">AUDPC_S</span>,
         <span class="kw">compress</span> <span class="kw">=</span> <span class="st">"bzip2"</span>,
         <span class="kw">overwrite</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html">use_data</a></span>(<span class="no">N_rates</span>,
         <span class="kw">compress</span> <span class="kw">=</span> <span class="st">"bzip2"</span>,
         <span class="kw">overwrite</span> <span class="kw">=</span> <span class="fl">TRUE</span>
)</pre></body></html></div>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<p>Sparks, Adam H, Castilla, Nancy P, &amp; Sander, Bjoern Ole. (2020). Data for “Do Alternate Wetting and Drying Irrigation Technology and Nitrogen Rates Affect Rice Sheath Blight?” [Data set]. Zenodo. <a href="http://doi.org/10.5281/zenodo.3889800">DOI: 10.5281/zenodo.3889800</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Adam Sparks, Nancy Castilla, Bjoern Ole Sander, Michael Noel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
